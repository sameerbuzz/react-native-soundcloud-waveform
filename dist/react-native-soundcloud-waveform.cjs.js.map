{"version":3,"file":"react-native-soundcloud-waveform.cjs.js","sources":["../src/utils/index.js","../src/components/Waveform.js","../src/index.js"],"sourcesContent":["/* eslint import/no-unresolved: [2, { ignore: ['react-native'] }] */\nimport { Dimensions } from 'react-native';\n\nfunction getColor(\n  bars,\n  bar,\n  percentPlayed,\n  percentPlayable,\n  inverse,\n  ACTIVE,\n  ACTIVE_INVERSE,\n  ACTIVE_PLAYABLE,\n  ACTIVE_PLAYABLE_INVERSE,\n  INACTIVE,\n  INACTIVE_INVERSE,\n) {\n  if (bar / bars.length < percentPlayed) {\n    return inverse ? ACTIVE_INVERSE : ACTIVE;\n  } if (bar / bars.length < percentPlayable) {\n    return inverse ? ACTIVE_PLAYABLE_INVERSE : ACTIVE_PLAYABLE;\n  }\n  return inverse ? INACTIVE_INVERSE : INACTIVE;\n}\n\nconst dimensionsWidth = Dimensions.get('window').width;\n\nexport { getColor, dimensionsWidth };\n","/* eslint import/no-unresolved: [2, { ignore: ['react', 'react-native'] }] */\n/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { View, TouchableOpacity } from 'react-native';\n\nimport { scaleLinear } from 'd3-scale';\nimport { mean } from 'd3-array';\nimport _ from 'lodash';\n\nimport { getColor } from '../utils';\n\nfunction Waveform(\n  {\n    waveform,\n    height,\n    width,\n    setTime,\n    percentPlayed,\n    percentPlayable,\n    inverse,\n    active,\n    activeInverse,\n    activePlayable,\n    activePlayableInverse,\n    inactive,\n    inactiveInverse,\n  },\n) {\n  const scaleLinearHeight = scaleLinear().domain([0, waveform.height]).range([0, height]);\n  const chunks = _.chunk(waveform.samples, waveform.width / ((width - 60) / 3));\n  return (\n    <View style={[{\n      height,\n      width,\n      justifyContent: 'center',\n      flexDirection: 'row',\n    },\n    inverse && {\n      transform: [\n        { rotateX: '180deg' },\n        { rotateY: '0deg' },\n      ],\n    },\n    ]}\n    >\n      {chunks.map((chunk, i) => (\n        <TouchableOpacity\n          key={i}\n          onPress={() => {\n            setTime(i);\n          }}\n        >\n          <View style={{\n            backgroundColor: getColor(\n              chunks,\n              i,\n              percentPlayed,\n              percentPlayable,\n              inverse,\n              active,\n              activeInverse,\n              activePlayable,\n              activePlayableInverse,\n              inactive,\n              inactiveInverse,\n            ),\n            width: 2,\n            marginRight: 1,\n            height: scaleLinearHeight(mean(chunk)),\n          }}\n          />\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n}\n\nWaveform.propTypes = {\n  waveform: PropTypes.object.isRequired,\n  height: PropTypes.number.isRequired,\n  width: PropTypes.number.isRequired,\n  setTime: PropTypes.func.isRequired,\n  percentPlayed: PropTypes.number.isRequired,\n  percentPlayable: PropTypes.number.isRequired,\n  inverse: PropTypes.bool.isRequired,\n  active: PropTypes.string.isRequired,\n  activeInverse: PropTypes.string.isRequired,\n  activePlayable: PropTypes.string.isRequired,\n  activePlayableInverse: PropTypes.string.isRequired,\n  inactive: PropTypes.string.isRequired,\n  inactiveInverse: PropTypes.string.isRequired,\n};\n\nexport default Waveform;\n","/* eslint import/no-unresolved: [2, { ignore: ['react', 'react-native'] }] */\n/* eslint-disable no-undef */\nimport React, { Component } from 'react';\nimport { View } from 'react-native';\nimport PropTypes from 'prop-types';\n\nimport Waveform from './components/Waveform';\n\nimport { dimensionsWidth } from './utils';\n\nclass SoundCloudWave extends Component {\n  state = {\n    waveform: null,\n  }\n\n  componentDidMount() {\n    const { waveformUrl } = this.props;\n    fetch(waveformUrl.replace('png', 'json'))\n      .then(res => res.json())\n      .then((json) => {\n        this.setState({\n          waveform: json,\n        });\n      });\n  }\n\n  render() {\n    const {\n      height,\n      width,\n      percentPlayed,\n      percentPlayable,\n      setTime,\n      active,\n      activeInverse,\n      activePlayable,\n      activePlayableInverse,\n      inactive,\n      inactiveInverse,\n    } = this.props;\n    const { waveform } = this.state;\n    if (!waveform) return null;\n    return (\n      <View style={{ flex: 1, justifyContent: 'center' }}>\n        <Waveform\n          waveform={waveform}\n          height={height}\n          width={width}\n          setTime={setTime}\n          percentPlayed={percentPlayed}\n          percentPlayable={percentPlayable}\n          active={active}\n          activeInverse={activeInverse}\n          activePlayable={activePlayable}\n          activePlayableInverse={activePlayableInverse}\n          inactive={inactive}\n          inactiveInverse={inactiveInverse}\n          inverse\n        />\n        <Waveform\n          waveform={waveform}\n          height={height}\n          width={width}\n          setTime={setTime}\n          percentPlayed={percentPlayed}\n          percentPlayable={percentPlayable}\n          active={active}\n          activeInverse={activeInverse}\n          activePlayable={activePlayable}\n          activePlayableInverse={activePlayableInverse}\n          inactive={inactive}\n          inactiveInverse={inactiveInverse}\n          inverse={false}\n        />\n      </View>\n    );\n  }\n}\n\nSoundCloudWave.defaultProps = {\n  percentPlayable: 0,\n  height: 50,\n  width: dimensionsWidth,\n  active: '#FF1844',\n  activeInverse: '#4F1224',\n  activePlayable: '#1b1b26',\n  activePlayableInverse: '#131116',\n  inactive: '#424056',\n  inactiveInverse: '#1C1A27',\n};\n\nSoundCloudWave.propTypes = {\n  waveformUrl: PropTypes.string.isRequired,\n  setTime: PropTypes.func.isRequired,\n  percentPlayed: PropTypes.number.isRequired,\n  percentPlayable: PropTypes.number,\n  height: PropTypes.number,\n  width: PropTypes.number,\n  active: PropTypes.string,\n  activeInverse: PropTypes.string,\n  activePlayable: PropTypes.string,\n  activePlayableInverse: PropTypes.string,\n  inactive: PropTypes.string,\n  inactiveInverse: PropTypes.string,\n};\n\nexport default SoundCloudWave;\n"],"names":["getColor","bars","bar","percentPlayed","percentPlayable","inverse","ACTIVE","ACTIVE_INVERSE","ACTIVE_PLAYABLE","ACTIVE_PLAYABLE_INVERSE","INACTIVE","INACTIVE_INVERSE","length","dimensionsWidth","Dimensions","get","width","Waveform","waveform","height","setTime","active","activeInverse","activePlayable","activePlayableInverse","inactive","inactiveInverse","scaleLinearHeight","scaleLinear","domain","range","chunks","_","chunk","samples","React","View","justifyContent","flexDirection","transform","rotateX","rotateY","map","i","TouchableOpacity","backgroundColor","marginRight","mean","propTypes","PropTypes","object","isRequired","number","func","bool","string","SoundCloudWave","componentDidMount","waveformUrl","props","fetch","replace","then","res","json","setState","render","state","flex","Component","defaultProps"],"mappings":"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"}